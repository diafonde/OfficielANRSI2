<div class="articles-page">
  <div class="page-header">
    <div class="header-content">
      <h1>Articles Management</h1>
      <p>Manage and organize your articles</p>
    </div>
    <a routerLink="/admin/articles/new" class="btn btn-primary">
      <i class="fas fa-plus"></i>
      New Article
    </a>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input
        type="text"
        placeholder="Search articles..."
        (input)="onSearchChange($event)"
        class="search-input"
      >
    </div>
    <div class="category-filter">
      <select (change)="onCategoryChange($event)" class="filter-select">
        <option value="">All Categories</option>
        <option *ngFor="let category of getCategories()" [value]="category">
          {{ category }}
        </option>
      </select>
    </div>
  </div>

  <!-- Articles Table -->
  <ng-container *ngIf="getFilteredArticles() | async as articles">
    <div class="articles-table">
      <div class="table-header">
        <div class="table-row">
          <div class="col-image">Image</div>
          <div class="col-title">Title</div>
          <div class="col-languages">Languages</div>
          <div class="col-author">Author</div>
          <div class="col-category">Category</div>
          <div class="col-featured">Featured</div>
          <div class="col-date">Date</div>
          <div class="col-actions">Actions</div>
        </div>
      </div>

      <div class="table-body" *ngIf="articles.length > 0">
        <div class="table-row article-row" *ngFor="let article of articles">
          <div class="col-image">
            <img [src]="article.imageUrl" [alt]="article.title" class="article-thumb">
          </div>
          <div class="col-title">
            <div class="title-content">
              <h3>{{ article.title }}</h3>
              <p class="excerpt">{{ article.excerpt }}</p>
            </div>
          </div>
          <div class="col-languages">
            <div class="mobile-label">Languages:</div>
            <div class="language-status">
              <span class="lang-badge" [class.available]="hasTranslation(article, 'fr')" title="FranÃ§ais">
                ðŸ‡«ðŸ‡·
              </span>
              <span class="lang-badge" [class.available]="hasTranslation(article, 'ar')" title="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">
                ðŸ‡²ðŸ‡·
              </span>
              <span class="lang-badge" [class.available]="hasTranslation(article, 'en')" title="English">
                ðŸ‡ºðŸ‡¸
              </span>
            </div>
          </div>
          <div class="col-author">
            <div class="mobile-label">Author:</div>
            <span class="author-name">{{ article.author }}</span>
          </div>
          <div class="col-category">
            <div class="mobile-label">Category:</div>
            <span class="category-badge">{{ article.category }}</span>
          </div>
          <div class="col-featured">
            <div class="mobile-label">Featured:</div>
            <button 
              class="featured-toggle" 
              [class.active]="article.featured"
              (click)="toggleFeatured(article)"
              [title]="article.featured ? 'Remove from featured' : 'Mark as featured'">
              <i class="fas fa-star" [class.filled]="article.featured"></i>
              <span class="featured-label">{{ article.featured ? 'Featured' : 'Not Featured' }}</span>
            </button>
          </div>
          <div class="col-date">
            <div class="mobile-label">Date:</div>
            <span class="date-text">{{ formatDate(article.publishDate) }}</span>
          </div>
          <div class="col-actions">
            <div class="action-buttons">
              <a [routerLink]="['/admin/articles/edit', article.id]" class="btn btn-sm btn-outline">
                <i class="fas fa-edit"></i>
                <span class="btn-text">Edit</span>
              </a>
              <button (click)="deleteArticle(article.id)" class="btn btn-sm btn-danger">
                <i class="fas fa-trash"></i>
                <span class="btn-text">Delete</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="table-footer" *ngIf="articles.length === 0">
        <div class="empty-state">
          <i class="fas fa-newspaper"></i>
          <h3>No articles found</h3>
          <p>Start by creating your first article</p>
          <a routerLink="/admin/articles/new" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Create Article
          </a>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- Pagination -->
  <div class="pagination-container" *ngIf="(getTotalArticlesCount() | async) as totalCount">
    <div class="pagination-info" *ngIf="totalCount > 0">
      <span>
        Showing {{ (currentPage - 1) * itemsPerPage + 1 }} - 
        {{ Math.min(currentPage * itemsPerPage, totalCount) }} 
        of {{ totalCount }} articles
      </span>
    </div>
    <div class="pagination" *ngIf="totalPages > 1">
      <button 
        class="pagination-btn" 
        [class.disabled]="currentPage === 1"
        (click)="previousPage()"
        [disabled]="currentPage === 1">
        <i class="fas fa-chevron-left"></i>
        <span>Previous</span>
      </button>
      
      <div class="page-numbers">
        <button 
          *ngIf="currentPage > 3 && totalPages > 5"
          class="page-number"
          (click)="goToPage(1)">
          1
        </button>
        <span *ngIf="currentPage > 3 && totalPages > 5" class="page-ellipsis">...</span>
        
        <button 
          *ngFor="let page of getPageNumbers()"
          class="page-number"
          [class.active]="page === currentPage"
          (click)="goToPage(page)">
          {{ page }}
        </button>
        
        <span *ngIf="currentPage < totalPages - 2 && totalPages > 5" class="page-ellipsis">...</span>
        <button 
          *ngIf="currentPage < totalPages - 2 && totalPages > 5"
          class="page-number"
          (click)="goToPage(totalPages)">
          {{ totalPages }}
        </button>
      </div>
      
      <button 
        class="pagination-btn" 
        [class.disabled]="currentPage === totalPages"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages">
        <span>Next</span>
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
