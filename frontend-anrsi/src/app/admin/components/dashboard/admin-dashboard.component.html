<div class="dashboard">
  <div class="dashboard-header">
    <div class="header-content">
      <div>
        <h1>{{ 'DASHBOARD_TITLE' | translate }}</h1>
        <p>{{ 'DASHBOARD_WELCOME' | translate: {firstName: currentUser?.firstName} }}</p>
      </div>
      <div class="language-switcher">
        <button 
          class="lang-dropdown-btn" 
          (click)="toggleLangDropdown()"
          [class.active]="isLangDropdownOpen">
          <span class="lang-flag">{{ getLanguageFlag(currentLang) }}</span>
          <span class="lang-text">{{ getLanguageName(currentLang) }}</span>
          <i class="fas fa-chevron-down" [class.rotated]="isLangDropdownOpen"></i>
        </button>
        <div class="lang-dropdown-menu" [class.show]="isLangDropdownOpen">
          <button 
            class="lang-option"
            [class.active]="currentLang === 'fr'"
            (click)="switchLanguage('fr')">
            <span class="lang-flag">ðŸ‡«ðŸ‡·</span>
            <span class="lang-text">FranÃ§ais</span>
          </button>
          <button 
            class="lang-option"
            [class.active]="currentLang === 'ar'"
            (click)="switchLanguage('ar')">
            <span class="lang-flag">ðŸ‡²ðŸ‡·</span>
            <span class="lang-text">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-newspaper"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.totalArticles }}</h3>
        <p>{{ 'DASHBOARD_TOTAL_ARTICLES' | translate }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.publishedArticles }}</h3>
        <p>{{ 'DASHBOARD_PUBLISHED' | translate }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-clock"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.draftArticles }}</h3>
        <p>{{ 'DASHBOARD_DRAFTS' | translate }}</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-calendar-week"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.recentArticles }}</h3>
        <p>{{ 'DASHBOARD_THIS_WEEK' | translate }}</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2>{{ 'DASHBOARD_QUICK_ACTIONS' | translate }}</h2>
    <div class="actions-grid">
      <a routerLink="/admin/articles/new" class="action-card">
        <div class="action-icon">
          <i class="fas fa-plus"></i>
        </div>
        <div class="action-content">
          <h3>{{ 'DASHBOARD_NEW_ARTICLE' | translate }}</h3>
          <p>{{ 'DASHBOARD_CREATE_ARTICLE' | translate }}</p>
        </div>
      </a>

      <a routerLink="/admin/articles" class="action-card">
        <div class="action-icon">
          <i class="fas fa-edit"></i>
        </div>
        <div class="action-content">
          <h3>{{ 'DASHBOARD_MANAGE_ARTICLES' | translate }}</h3>
          <p>{{ 'DASHBOARD_EDIT_ARTICLES' | translate }}</p>
        </div>
      </a>

      <a routerLink="/admin/users" class="action-card" *ngIf="currentUser?.role === 'admin'">
        <div class="action-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="action-content">
          <h3>{{ 'DASHBOARD_MANAGE_USERS' | translate }}</h3>
          <p>{{ 'DASHBOARD_USER_ADMIN' | translate }}</p>
        </div>
      </a>

      <a href="/" target="_blank" class="action-card">
        <div class="action-icon">
          <i class="fas fa-external-link-alt"></i>
        </div>
        <div class="action-content">
          <h3>{{ 'DASHBOARD_VIEW_SITE' | translate }}</h3>
          <p>{{ 'DASHBOARD_PREVIEW_SITE' | translate }}</p>
        </div>
      </a>
    </div>
  </div>

  <!-- Recent Articles -->
  <div class="recent-articles">
    <div class="section-header">
      <h2>{{ 'DASHBOARD_RECENT_ARTICLES' | translate }}</h2>
      <a routerLink="/admin/articles" class="view-all-link">{{ 'DASHBOARD_VIEW_ALL' | translate }}</a>
    </div>

    <div class="articles-list" *ngIf="getRecentArticles() | async as articles">
      <div class="article-item" *ngFor="let article of articles.slice(0, 5)">
        <div class="article-image">
          <img [src]="article.imageUrl" [alt]="article.title">
        </div>
        <div class="article-content">
          <h3>{{ article.title }}</h3>
          <p>{{ article.excerpt }}</p>
          <div class="article-meta">
            <span class="author">{{ article.author }}</span>
            <span class="date">{{ formatDate(article.publishDate) }}</span>
          </div>
        </div>
        <div class="article-actions">
          <a [routerLink]="['/admin/articles/edit', article.id]" class="btn btn-sm btn-outline">
            <i class="fas fa-edit"></i>
            {{ 'DASHBOARD_EDIT' | translate }}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
