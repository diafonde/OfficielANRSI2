<div class="ai4agri-hero">
  <div class="container">
    <h1>{{ displayContent?.heroTitle || 'AI 4 AGRI' }}</h1>
  </div>
  <div class="hero-overlay"></div>
</div>

<div class="container" *ngIf="isLoading">
  <div class="loading-container">
    <div class="loading">{{ 'LOADING' | translate }}</div>
  </div>
</div>

<div class="container" *ngIf="!isLoading && displayContent">
  <section class="section ai4agri-section">
    <div class="breadcrumb">
      <a routerLink="/">Accueil</a>
      <span>»</span>
      <span>AI 4 AGRI</span>
    </div>
    
    <h2 class="page-title">AI 4 AGRI</h2>
    
    <div class="ai4agri-news-list" *ngIf="displayContent.newsItems && displayContent.newsItems.length > 0">
      <article class="news-article" *ngFor="let newsItem of displayContent.newsItems; let i = index">
        <!-- Display multiple images or single image (backward compatibility) -->
      
        <h3 class="article-title">{{ newsItem.title }}</h3>
        
        <!-- Description with truncation -->
        <div class="article-description-container" *ngIf="newsItem.description">
          <p 
            class="article-description" 
            [class.truncated]="!isExpanded(i)"
            [class.expanded]="isExpanded(i)">
            {{ newsItem.description }}
          </p>
        </div>
        
        <!-- Read more button - show if description is long OR if there are images -->
        <div class="read-more-container" *ngIf="needsTruncation(newsItem.description, newsItem)">
          <button 
            class="read-more-btn"
            (click)="toggleExpand(i)"
            [attr.aria-expanded]="isExpanded(i)">
            {{ isExpanded(i) ? 'Lire moins' : 'Lire tout' }}
          </button>
        </div>
        
        <div class="article-meta">
          <span class="article-date" *ngIf="getNewsDate(newsItem)">
            {{ getNewsDate(newsItem) }}
          </span>
        </div>
        <div class="article-actions" *ngIf="newsItem.url">
          <a 
            [href]="newsItem.url" 
            class="learn-more-link"
            [target]="newsItem.url.startsWith('http') ? '_blank' : '_self'"
            [rel]="newsItem.url.startsWith('http') ? 'noopener noreferrer' : null">
            En savoir plus à propos de {{ newsItem.title }}
          </a>
        </div>
        <!-- Images shown only when expanded -->
        <ng-container *ngIf="getNewsItemImages(newsItem).length > 0 && isExpanded(i)">
          <div class="article-images">
            <div class="article-image" *ngFor="let imageUrl of getNewsItemImages(newsItem); trackBy: trackByImageUrl">
              <img [src]="imageUrl" [alt]="newsItem.title" (error)="onImageError($event)" loading="lazy" />
            </div>
          </div>
        </ng-container>
        
        <!-- Documents shown only when expanded -->
        <ng-container *ngIf="getNewsItemDocuments(newsItem).length > 0 && isExpanded(i)">
          <div class="article-documents">
            <div class="document-item" *ngFor="let documentUrl of getNewsItemDocuments(newsItem)">
              <a [href]="documentUrl" target="_blank" rel="noopener noreferrer" class="document-link">
                <i [class]="getDocumentIconClass(documentUrl)"></i>
                <span class="document-name">{{ getDocumentFileName(documentUrl) }}</span>
                <i class="fas fa-external-link-alt document-external-icon"></i>
              </a>
            </div>
          </div>
        </ng-container>
      </article>
    </div>
    
    <div class="no-news" *ngIf="!displayContent.newsItems || displayContent.newsItems.length === 0">
      <p>Aucune actualité disponible pour le moment.</p>
    </div>
  </section>
</div>

