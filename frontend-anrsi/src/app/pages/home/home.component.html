
<app-hero-section></app-hero-section>
<section id="news" class="section featured-section" data-aos="flip-up">
  <div style="display: flex; justify-content: center; margin-top: 0;">
    <h2 class="section-title">{{ 'Dernières actualités' | translate }}</h2>
  </div>
  
  <!-- Slideshow Container -->
  <div class="articles-slideshow" 
       (mouseenter)="onSlideshowMouseEnter()" 
       (mouseleave)="onSlideshowMouseLeave()">
    
    <!-- Slideshow Controls -->
    <div class="slideshow-controls" *ngIf="canScroll()">
      <button class="slideshow-btn prev-btn" (click)="prevSlide()" aria-label="Previous articles">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <button class="slideshow-btn next-btn" (click)="nextSlide()" aria-label="Next articles">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </div>
    
    <!-- Articles Container -->
    <div class="articles-container">
      <div class="articles-track" [style.transform]="'translateX(-' + (currentSlide * getTransformPercentage()) + '%)'">
        <div class="articles-slide" *ngFor="let article of latestArticles">
          <app-article-card [article]="article"></app-article-card>
        </div>
      </div>
    </div>
    
    <!-- Slideshow Indicators -->
    <div class="slideshow-indicators" *ngIf="canScroll()">
      <button 
        *ngFor="let slide of getIndicatorSlides(); let i = index"
        class="indicator" 
        [class.active]="getIndicatorIndex(i) === currentSlide"
        (click)="goToSlide(getIndicatorIndex(i))"
        [attr.aria-label]="'Go to slide ' + (getIndicatorIndex(i) + 1)">
      </button>
    </div>
  </div>
  
  <div class="container text-center mt-4">
    <a routerLink="/articles" class="btn btn-primary">
      {{ 'Voir toutes les actualités' | translate }}
    </a>
  </div>



</section>

<section id="featured" class="featured-sections" data-aos="fade-up-right">
  <div class="container">
    <h2 class="section-title">{{ 'Recherches mises en avant' | translate }}</h2>
    <div class="grid grid-4">
      <app-article-card 
        *ngFor="let article of featuredArticles" 
        [article]="article" 
        [isFeatured]="true">
      </app-article-card>
    </div>
  </div>
</section>

<section id="videotheque" class="section videotheque-section" data-aos="fade-up">
  <div class="videotheque-container">
    <h2 class="videotheque-title">{{ 'VIDÉOTHÈQUE' | translate }}</h2>
    
    <div class="videos-slideshow" 
         (mouseenter)="onVideoSlideshowMouseEnter()" 
         (mouseleave)="onVideoSlideshowMouseLeave()">
      
      <!-- Navigation Arrows -->
      <div class="video-slideshow-controls" *ngIf="featuredVideos.length > 0">
        <button class="video-slideshow-btn prev-video-btn" (click)="prevVideoSlide()" aria-label="Previous videos" *ngIf="canScrollVideos()">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button class="video-slideshow-btn next-video-btn" (click)="nextVideoSlide()" aria-label="Next videos" *ngIf="canScrollVideos()">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
      
      <!-- Videos Container -->
      <div class="videos-container">
        <div class="videos-track" [style.transform]="'translateX(-' + (currentVideoSlide * getVideoTransformPercentage()) + '%)'">
          <div class="video-slide" 
               *ngFor="let video of featuredVideos; let i = index"
               [class.middle]="i === getMiddleVideoIndex()"
               [class.active]="i === currentVideoSlide">
            <div class="video-thumbnail" (click)="playVideo(video)">
              <img 
                [src]="getVideoThumbnail(video)" 
                [alt]="video.title" 
                *ngIf="getVideoThumbnail(video)"
                (error)="onThumbnailError($event, video)"
                loading="lazy">
              <div class="video-thumbnail-placeholder" *ngIf="!getVideoThumbnail(video)">
                <div class="placeholder-icon">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                    <polygon points="10 8 16 12 10 16 10 8"></polygon>
                  </svg>
                </div>
              </div>
              <div class="play-button-overlay" *ngIf="i === getMiddleVideoIndex()">
                <div class="play-button">
                  <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <circle cx="32" cy="32" r="30" fill="white" opacity="0.95"></circle>
                    <polygon points="24 18 24 46 46 32 24 18" fill="#102A57"></polygon>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="videotheque-button-container">
      <a routerLink="/videos" class="btn-videotheque">
        {{ 'Toutes les vidéos' | translate }}
      </a>
    </div>
  </div>
</section>

<!-- Video Modal -->
<div class="video-modal" *ngIf="showVideoModal && selectedVideo" (click)="closeVideoModal()">
  <div class="video-modal-content" (click)="$event.stopPropagation()">
    <button class="video-modal-close" (click)="closeVideoModal()" aria-label="Close video">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
    <div class="video-modal-header">
      <h3>{{ selectedVideo.title }}</h3>
    </div>
    <div class="video-modal-player">
      <iframe
        [src]="getSelectedVideoUrl() | safe"
        frameborder="0"
        allowfullscreen
        [title]="selectedVideo.title">
      </iframe>
    </div>
  </div>
</div>

<!-- <section class="section research-areas-section" data-aos="fade-right" data-aos="zoom-up">
  <div class="container">
    <h2 class="section-title">{{ 'Research Fields' | translate }}</h2>
    <div class="grid grid-4">
      <div class="research-area-card" *ngFor="let area of researchAreas">
        <div class="research-area-icon" [innerHTML]="area.icon"></div>
        <h3>{{ area.name }}</h3>
        <p>{{ area.description }}</p>
        <a href="#" class="btn btn-outline">{{ 'Explore' | translate }}</a>
      </div>
    </div>
  </div>
</section> -->

<section class="section missions-section">
  <div class="container">
    <h2 class="section-title">{{ 'Nos Missions' | translate }}</h2>
    <div class="missions-list">
      <div class="mission-item-1" >
        <div class="mission-number">1</div>
        <div class="mission-text">
          <h3>Contribuer au développement des sciences, des technologies et de l'innovation</h3>
          <p>L'ANRSI s'engage à promouvoir et soutenir le développement des sciences, des technologies et de l'innovation en Mauritanie.</p>
        </div>
      </div>
      
      <div class="mission-item-2" data-aos="fade-up" data-aos-delay="200">
        <div class="mission-number">2</div>
        <div class="mission-text">
          <h3>Gérer le fonds alloué à la recherche et l'innovation</h3>
          <p>Nous assurons une gestion transparente et efficace des fonds dédiés à la recherche scientifique et à l'innovation.</p>
        </div>
      </div>
      
      <div class="mission-item-3" data-aos="fade-up" data-aos-delay="300">
        <div class="mission-number">3</div>
        <div class="mission-text">
          <h3>Lancer des appels à projet dans le cadre des priorités nationales</h3>
          <p>L'ANRSI lance des appels à projet définis par le Haut Conseil de la Recherche Scientifique et de l'Innovation présidé par son Excellence le Premier Ministre.</p>
        </div>
      </div>
      
      <div class="mission-item-4" data-aos="fade-up" data-aos-delay="400">
        <div class="mission-number">4</div>
        <div class="mission-text">
          <h3>Assurer le suivi et l'évaluation de tous les programmes et projets de recherche</h3>
          <p>Nous garantissons un suivi rigoureux et une évaluation complète de tous les programmes et projets de recherche que nous finançons.</p>
        </div>
      </div>
      
      <div class="mission-item-5" data-aos="fade-up" data-aos-delay="500">
        <div class="mission-number">5</div>
        <div class="mission-text">
          <h3>Analyser l'impact des financements alloués sur la production scientifique nationale</h3>
          <p>L'ANRSI analyse et mesure l'impact des financements sur la production scientifique nationale pour optimiser nos investissements.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section map-section" data-aos="fade-up">
  <div class="container">
    <h2 class="section-title">{{ 'Notre Localisation' | translate }}</h2>
    <div class="map-container">
      <iframe 
        src="https://www.google.com/maps?q=18.099534477533627,-15.979605442328959&z=15&output=embed" 
        width="100%" 
        height="450" 
        style="border:0;" 
        allowfullscreen="" 
        loading="lazy">
      </iframe>
    </div>
    <div class="map-info">
      <div class="info-item">
        <i class="fas fa-map-marker-alt"></i>
        <span style="color: green;">Nouakchott, Mauritanie</span>
      </div>
      <div class="info-item">
        <i class="fas fa-phone"></i>
        <span style="color: green;">+222 45 24 24 24</span>
      </div>
      <div class="info-item">
        <i class="fas fa-envelope"></i>
        <span style="color: green;">contact&#64;anrsi.mr</span>
      </div>
    </div>
  </div>

</section>

<section class="section partners-section" data-aos="flip-left" data-aos-easing="ease-out-cubic" data-aos-duration="2000">
  <div class="container">
    <h2 class="section-title">{{ 'Nos Partenaires' | translate }}</h2>
    <div class="partners-grid">
      <div class="partner-card" *ngFor="let partner of partners">
        <img [src]="partner.logo" [alt]="partner.name" class="partner-logo">
        <div class="partner-name">{{ partner.name }}</div>
      </div>
    </div>
  </div>
</section>
